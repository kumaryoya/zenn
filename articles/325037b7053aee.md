---
title: "ã€Railsã€‘è¶…ç°¡å˜ï¼ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•"
emoji: "ğŸ“"
type: "tech"
topics: [rails, ruby, javascript, html, css]
published: true
publication_name: "linkedge"
---

## ã¯ã˜ã‚ã«

ãŠç–²ã‚Œæ§˜ã§ã™ã€‚
ãŠãŠãã¾ã§ã™ã€‚

ä»Šå›ã¯ã€ã€Œã€Railsã€‘è¶…ç°¡å˜ï¼ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•ã€ã¨ã„ã†ã“ã¨ã§ã€**Ruby on Rails**ã§ã€ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã€ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚

ã¨ã¦ã‚‚ç°¡å˜ã«å®Ÿè£…ã§ãã‚‹ã®ã§ã€ãœã²å®Ÿè£…ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

å°‘ã—ã§ã‚‚çš†æ§˜ã®å‚è€ƒã«ãªã‚Šã¾ã™ã¨å¹¸ã„ã§ã™ã€‚

## å¯¾è±¡èª­è€…

:::message
- **Ruby on Rails**ã«ã¤ã„ã¦èˆˆå‘³ã®ã‚ã‚‹æ–¹
- ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã®å®Ÿè£…ã«ã¤ã„ã¦èˆˆå‘³ã®ã‚ã‚‹æ–¹
:::

## æ³¨æ„ç‚¹

:::message alert
- å†…å®¹ã«èª¤ã‚ŠãŒã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
- ã‚³ãƒ¡ãƒ³ãƒˆç­‰ã§æ•™ãˆã¦ã„ãŸã ã‘ã‚‹ã¨å¹¸ç”šã§ã™ã€‚
:::

## ç’°å¢ƒ

:::message
- Docker Desktopï¼š4.38.0
- Docker Engineï¼š27.5.1
- Rubyï¼š3.3.5
- Railsï¼š7.0.8.6
- Node.jsï¼š22.13.0
- npmï¼š10.9.2
- Yarnï¼š1.22.22
- Font Awesomeï¼š5.15.4
- AdminLTEï¼š3.2.0
- Bootstrapï¼š4.6.2
- jQueryï¼š3.7.1
:::

## å‰æ

ä»Šå›ã¯ã€**Post**ãƒ†ãƒ¼ãƒ–ãƒ«ã®**content**ã‚«ãƒ©ãƒ ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ãƒœã‚¿ãƒ³ã‚’å®Ÿè£…ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚
ä»¥ä¸‹ã®ã‚ˆã†ãª**Post**ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸã€‚

```ruby:db/schema.rb
create_table "posts", charset: "utf8mb4", collation: "utf8mb4_0900_ai_ci", force: :cascade do |t|
  t.bigint "user_id", null: false
  t.string "title", null: false
  t.text "content", null: false
  t.datetime "created_at", null: false
  t.datetime "updated_at", null: false
  t.index ["user_id"], name: "index_posts_on_user_id"
end
```

ä¸€è¦§ç”»é¢ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

```ruby:app/views/posts/index.html.slim
div.p-5
  h1.mb-3 æŠ•ç¨¿ä¸€è¦§
  p style="color: green" = notice
  = link_to "æ–°è¦è¿½åŠ ", new_post_path, class: 'btn btn-outline-info btn-sm m-3'
  .d-flex.flex-wrap.align-items-center
    - @posts.each do |post|
      .card.border.m-3 style="width: 400px;"
        .card-header.h5 = post.title
        .card-body
          .mb-3 = post.content
          = link_to "è©³ç´°", post, class: 'btn btn-outline-secondary btn-sm mr-1'
          = link_to "ç·¨é›†", edit_post_path(post), class: 'btn btn btn-outline-info btn-sm mr-1'
          = link_to "å‰Šé™¤", post, method: :delete, data: { turbo: "true", turbo_method: :delete, turbo_confirm: 'å‰Šé™¤ã—ã¾ã™ã‹?' }, class: "btn btn-outline-danger btn-sm"
```

![](https://storage.googleapis.com/zenn-user-upload/cb7027b7ef5e-20250201.png =1000x)

## å®Ÿè£…

### JavaScriptã®å®Ÿè£…

ã¾ãšã¯ã€**app/javascript/controllers**ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«**copy.js**ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚

```javascript:app/javascript/controllers/copy.js
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.copy-button').forEach(button => {
    button.addEventListener('click', () => {
      const targetId = button.getAttribute('data-target');
      const targetElement = document.getElementById(targetId);
      const content = targetElement.innerText;
      navigator.clipboard.writeText(content)
      .then(() => {
        const originalText = button.querySelector('.copy-text');
        originalText.textContent = 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ';
        setTimeout(() => {
          originalText.textContent = 'ã‚³ãƒ”ãƒ¼';
        }, 2000);
      })
    });
  });
});
```

**application.js**ã«ä»¥ä¸‹ã®ã‚ˆã†ã«è¿½è¨˜ã—ã€**copy.js**ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚

```diff javascript:app/javascript/application.js
// Configure your import map in config/importmap.rb. Read more: https://github.com/rails/importmap-rails
import "@hotwired/turbo-rails"
import "controllers"
import "jquery"
import "bootstrap"
import "admin-lte"
+ import "controllers/copy";
```

### Viewã®å®Ÿè£…

æ¬¡ã«ã€**Post**ãƒ¬ã‚³ãƒ¼ãƒ‰æ¯ã«ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«**View**ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£ã—ã¾ã™ã€‚

```diff ruby:app/views/posts/index.html.slim
div.p-5
  h1.mb-3 æŠ•ç¨¿ä¸€è¦§
  p style="color: green" = notice
  = link_to "æ–°è¦è¿½åŠ ", new_post_path, class: 'btn btn-outline-info btn-sm m-3'
  .d-flex.flex-wrap.align-items-center
    - @posts.each do |post|
      .card.border.m-3 style="width: 400px;"
        .card-header.h5 = post.title
        .card-body
+         .float-right
+           button.copy-button.btn.btn-outline-secondary.btn-sm data-target="post_#{post.id}"
+             i.far.fa-copy.mr-1
+             span.copy-text ã‚³ãƒ”ãƒ¼
+         div id="post_#{post.id}"
            .mb-3 = post.content
          = link_to "è©³ç´°", post, class: 'btn btn-outline-secondary btn-sm mr-1'
          = link_to "ç·¨é›†", edit_post_path(post), class: 'btn btn btn-outline-info btn-sm mr-1'
          = link_to "å‰Šé™¤", post, method: :delete, data: { turbo: "true", turbo_method: :delete, turbo_confirm: 'å‰Šé™¤ã—ã¾ã™ã‹?' }, class: "btn btn-outline-danger btn-sm"
```

![](https://storage.googleapis.com/zenn-user-upload/2bacde736c4d-20250201.png =1000x)

ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã®å®Ÿè£…ã¯ä»¥ä¸Šã§ã™ã€‚

## å‹•ä½œç¢ºèª

![](https://storage.googleapis.com/zenn-user-upload/1c3e0073e6b3-20250202.gif =1000x)

**Post**ãƒ¬ã‚³ãƒ¼ãƒ‰æ¯ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãã‚Œãã‚Œã®**content**ã‚«ãƒ©ãƒ ã®å†…å®¹ãŒã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚

## è§£èª¬

æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã¯ã€ä»¥ä¸‹ã®æµã‚Œã§å‹•ä½œã—ã¦ã„ã¾ã™ã€‚

1. `document.querySelectorAll('.copy-button')`ã§ã€**copy-button**ã‚¯ãƒ©ã‚¹ã‚’æŒã¤ãƒœã‚¿ãƒ³ã‚’å…¨ã¦å–å¾—ã—ã€ãã‚Œãã‚Œã«ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨­å®šã€‚

2. ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸãƒœã‚¿ãƒ³ã®**data-target**å±æ€§ã‹ã‚‰ã€ã‚³ãƒ”ãƒ¼å¯¾è±¡ã®è¦ç´ ã®IDã‚’å–å¾—ã€‚

3. å–å¾—ã—ãŸIDã‚’å…ƒã«ã€ã‚³ãƒ”ãƒ¼å¯¾è±¡ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã€‚

4. ã‚³ãƒ”ãƒ¼ãŒæˆåŠŸã—ãŸå ´åˆã€ãƒœã‚¿ãƒ³å†…ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ã€Œã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€ã«å¤‰æ›´ã—ã€2ç§’å¾Œã«å…ƒã«æˆ»ã™ã€‚

<br>

â†“ãã‚‚ãã‚‚ã®ã‚³ãƒ”ãƒ¼ã®ä»•çµ„ã¿ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®å‹•ç”»ãŒåˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚
https://www.youtube.com/shorts/nePdQ9XLM4g

## ã¾ã¨ã‚

ä»Šå›ã€**Ruby on Rails**ã§ã€ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã€ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚

ã¨ã¦ã‚‚ç°¡å˜ã«å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚

ã‚ã‚‹ã¨ä¾¿åˆ©ãªå ´é¢ã‚‚ã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã®ã§ã€ãœã²å®Ÿè£…ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

å°‘ã—ã§ã‚‚çš†æ§˜ã®å‚è€ƒã«ãªã‚Šã¾ã™ã¨å¹¸ã„ã§ã™ã€‚

æœ€å¾Œã¾ã§èª­ã‚“ã§ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚
