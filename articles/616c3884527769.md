---
title: "ã€Railsã€‘primary_key(ä¸»ã‚­ãƒ¼)ã‚’ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã«ã™ã‚‹"
emoji: "ğŸ”‘"
type: "tech"
topics: [rails, ruby, mysql, security, docker]
published: false
publication_name: "linkedge"
---

## ã¯ã˜ã‚ã«

ãŠç–²ã‚Œæ§˜ã§ã™ã€‚
ãŠãŠãã¾ã§ã™ã€‚

ä»Šå›ã¯ã€ã€Œã€Railsã€‘primary_key(ä¸»ã‚­ãƒ¼)ã‚’ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã«ã™ã‚‹ã€ã¨ã„ã†ã“ã¨ã§ã€**Ruby on Rails**ã«ãŠã„ã¦ã€**primary_key**ã‚’ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã«ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚

å°‘ã—ã§ã‚‚çš†æ§˜ã®å‚è€ƒã«ãªã‚Šã¾ã™ã¨å¹¸ã„ã§ã™ã€‚

## å¯¾è±¡èª­è€…

:::message
- **Ruby on Rails**ã‚’å­¦ç¿’ä¸­ã®æ–¹
- **primary_key**ã‚’ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã«ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦çŸ¥ã‚ŠãŸã„æ–¹
:::

## æ³¨æ„ç‚¹

:::message alert
- å†…å®¹ã«èª¤ã‚ŠãŒã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
- ã‚³ãƒ¡ãƒ³ãƒˆç­‰ã§æ•™ãˆã¦ã„ãŸã ã‘ã‚‹ã¨å¹¸ç”šã§ã™ã€‚
:::

## ç’°å¢ƒ

:::message
- Docker Desktopï¼š4.34.2
- Docker Engineï¼š27.2.0
- Rubyï¼š3.3.4
- Railsï¼š7.0.8.4
- MySQLï¼š8.0.39
:::

## primary_key(ä¸»ã‚­ãƒ¼)ã¨ã¯

**primary_key**ã¨ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãŠã„ã¦ã€å„ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä¸€æ„ã«è­˜åˆ¥ã™ã‚‹ãŸã‚ã®ã‚­ãƒ¼ã®ã“ã¨ã§ã™ã€‚
ãã®ãŸã‚ã€**primary_key**ã¯ã€é‡è¤‡ã™ã‚‹å€¤ã‚’æŒã¤ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚

**Ruby on Rails**ã§ã¯ã€ç‰¹ã«æŒ‡å®šã—ãªã„å ´åˆã€**id**ã‚«ãƒ©ãƒ ãŒ**primary_key**ã¨ã—ã¦è¨­å®šã•ã‚Œã€1ã€ï¼’ã€ï¼“ã€ï¼”ã€ï¼•ã€ãƒ»ãƒ»ãƒ»ã¨ã„ã†ã‚ˆã†ã«ã€é †ã«**id**ãŒæŒ¯ã‚‰ã‚Œã¦ã„ãã¾ã™ã€‚

https://www.sejuku.net/blog/52356

## ãªãœprimary_key(ä¸»ã‚­ãƒ¼)ã‚’ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã«ã™ã‚‹ã®ã‹

**Ruby on Rails**ã§ã¯ã€`/posts/:id/edit`ã®ã‚ˆã†ãª**URL**ã‚’ç”Ÿæˆã™ã‚‹éš›ã«ã€**id**ã‚«ãƒ©ãƒ ã®å€¤ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
å…ˆã»ã©ã‚‚è¿°ã¹ãŸé€šã‚Šã€**id**ã‚«ãƒ©ãƒ ã¯é€šå¸¸ã€1ã€ï¼’ã€ï¼“ã€ï¼”ã€ï¼•ã€ãƒ»ãƒ»ãƒ»ã¨ã„ã†ã‚ˆã†ã«ã€é †ã«**id**ãŒæŒ¯ã‚‰ã‚Œã¦ã„ãã¾ã™ã®ã§ã€ãƒ‘ã‚¹ãŒæ¨æ¸¬ã•ã‚Œã‚„ã™ããªã‚Šã¾ã™ã€‚

```ruby:app/controllers/posts_controller.rb
def edit
  @post = current_user.posts.find(params[:id])
end
```

```ruby:app/controllers/posts_controller.rb
def edit
  @post = Post.find(params[:id])
end
```

1ã¤ç›®ã®ä¾‹ã®ã‚ˆã†ã«ã€**current_user**èµ·ç‚¹ã§ã€**Post**ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã™ã‚‹å ´åˆã¯ã€ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã®**id**ã®å€¤ã‚’æ‰“ã¡å¤‰ãˆãŸã¨ã—ã¦ã‚‚ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŠ•ç¨¿ã‚’ç·¨é›†ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚

ã—ã‹ã—ã€ä¸‡ãŒä¸€ã€2ã¤ç›®ã®ä¾‹ã®ã‚ˆã†ã«ã€**Post**ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã™ã‚‹å ´åˆã¯ã€ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã®**id**ã®å€¤ã‚’æ‰“ã¡å¤‰ãˆã‚‹ã“ã¨ã§ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŠ•ç¨¿ã‚’ç·¨é›†ã™ã‚‹ã“ã¨ãŒã§ãã¦ã—ã¾ã„ã¾ã™ã€‚

é–‹ç™ºã‚’é€²ã‚ã‚‹ä¸­ã§ã€ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã®**id**ã‚’æ‰“ã¡å¤‰ãˆãŸã¨ã—ã¦ã‚‚ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŠ•ç¨¿ã‚’ç·¨é›†ã™ã‚‹ã“ã¨ãŒã§ããªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€1ã¤ç›®ã®ä¾‹ã®ã‚ˆã†ã«å¯¾ç­–ã‚’ã™ã‚‹ã“ã¨ã‚‚é‡è¦ã§ã™ãŒã€ãã‚‚ãã‚‚æ¨æ¸¬ã•ã‚Œã«ãã„ã‚ˆã†ãªãƒ‘ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã‚‚é‡è¦ã§ã™ã€‚

ãã“ã§ã€**primary_key**ã‚’ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã«ã™ã‚‹ã“ã¨ã§ã€ãƒ‘ã‚¹ã‚’æ¨æ¸¬ã•ã‚Œã«ããã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## primary_key(ä¸»ã‚­ãƒ¼)ã‚’ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã«ã™ã‚‹æ–¹æ³•

**ç’°å¢ƒæ§‹ç¯‰ãŒæ¸ˆã‚“ã§ã„ã‚‹æ®µéšã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¾ã™ã€‚**

### ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã‚’ç”Ÿæˆã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å®šç¾©ã™ã‚‹

```ruby:app/models/concerns/id_generate_module.rb
module IdGenerateModule
  extend ActiveSupport::Concern

  included do
    before_create :generate, if: -> { has_attribute?(:id) }
  end

  def generate
    self.id ||= loop do
      id = SecureRandom.hex(5)
      break id unless self.class.exists?(id: id)
    end
  end
end
```

ã¾ãšã¯ã€`app/models/concerns`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«`id_generate_module.rb`ã¨ã„ã†ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚

`id = SecureRandom.hex(5)`ã®éƒ¨åˆ†ã§ã€ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™ã€‚
æ‹¬å¼§å†…ã®æ•°å­—ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€ç”Ÿæˆã•ã‚Œã‚‹æ–‡å­—åˆ—ã®é•·ã•ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ä»Šå›ã¯ã€10æ–‡å­—ã®ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã‚’ç”Ÿæˆã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

```diff ruby:app/models/application_record.rb
class ApplicationRecord < ActiveRecord::Base
+ include IdGenerateModule
  primary_abstract_class
end
```

æ¬¡ã«ã€`app/models/application_record.rb`ã«`IdGenerateModule`ã‚’ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

ã§ã¯ã€å®Ÿéš›ã«ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```
docker compose run app rails new . --force --no-deps --database=mysql --skip-test
```

æ¬¡ã«ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¾ã™ã€‚

```diff ruby:db/migrate/20240914035018_create_posts.rb
class CreatePosts < ActiveRecord::Migration[7.0]
  def change
+   create_table :posts, id: :string, limit: 10 do |t|
-   create_table :posts do |t|
      t.string :title
      t.text :content

      t.timestamps
    end
  end
end
```

ã“ã®ã‚ˆã†ã«ç·¨é›†ã™ã‚‹ã“ã¨ã§ã€`posts`ãƒ†ãƒ¼ãƒ–ãƒ«ã®`id`ã‚«ãƒ©ãƒ ã®å‹ã‚’`string`ã«å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã§ã¯ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã€å®Ÿéš›ã«`posts`ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```
docker compose run app rails db:migrate
```

```ruby:db/schema.rb
ActiveRecord::Schema[7.0].define(version: 2024_09_14_035018) do
  create_table "posts", id: { type: :string, limit: 10 }, charset: "utf8mb4", collation: "utf8mb4_0900_ai_ci", force: :cascade do |t|
    t.string "title"
    t.text "content"
    t.datetime "created_at", null: false
    t.datetime "updated_at", null: false
  end

end
```

`posts`ãƒ†ãƒ¼ãƒ–ãƒ«ã®`id`ã‚«ãƒ©ãƒ ã®å‹ãŒ`string`ã«å¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚

ã§ã¯ã€å®Ÿéš›ã«ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```ruby:config/routes.rb
Rails.application.routes.draw do
  root 'posts#index'
  resources :posts
end
```

ã“ã®ã‚ˆã†ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å®šç¾©ã—ã€ http://localhost:3000/ ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/88388e14df31-20240914.png =500x)

ã“ã“ã‹ã‚‰ã€New Postã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€æ–°è¦æŠ•ç¨¿ã‚’ä½œæˆã—ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/9f56109f5afa-20240914.png =500x)

![](https://storage.googleapis.com/zenn-user-upload/6f28035ae6d7-20240914.png =500x)

ç„¡äº‹ã«ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚

ã§ã¯ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§idã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```ruby
docker compose run app rails c

irb(main):001> Post.first
  Post Load (0.7ms)  SELECT `posts`.* FROM `posts` ORDER BY `posts`.`id` ASC LIMIT 1
=>
#<Post:0x0000ffff66c0d7b0
  id: "6494ac5f80",
  title: "ã‚¿ã‚¤ãƒˆãƒ«",
  content: "æœ¬æ–‡",
  created_at: Sat, 14 Sep 2024 05:01:39.153767000 UTC +00:00,
  updated_at: Sat, 14 Sep 2024 05:01:39.153767000 UTC +00:00>
```

ç„¡äº‹ã«idãŒãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚

![](https://storage.googleapis.com/zenn-user-upload/ebcceae79835-20240914.png =500x)

![](https://storage.googleapis.com/zenn-user-upload/d021e50f7d2a-20240914.png =500x)

å®Ÿéš›ã«ç”Ÿæˆã•ã‚Œã¦ã„ã‚‹URLã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

- è©³ç´°ãƒšãƒ¼ã‚¸ï¼šhttp://localhost:3000/posts/6494ac5f80
- ç·¨é›†ãƒšãƒ¼ã‚¸ï¼šhttp://localhost:3000/posts/6494ac5f80/edit

æ¬¡ã«ã€Postãƒ†ãƒ¼ãƒ–ãƒ«ã¨1å¯¾å¤šã®é–¢ä¿‚ã«ã‚ã‚‹Commentãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚‚åŒæ§˜ã®è¨­å®šã‚’é©ç”¨ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
ã“ã“ã§ã®ãƒã‚¤ãƒ³ãƒˆã¯ã€Commentãƒ†ãƒ¼ãƒ–ãƒ«ã®å¤–éƒ¨ã‚­ãƒ¼ã§ã‚ã‚‹`post_id`ã‚«ãƒ©ãƒ ã®å‹ã‚’`string`ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã™ã€‚

```
docker compose run app rails g scaffold Comment post:references content:text
```

æ¬¡ã«ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¾ã™ã€‚

```diff ruby:db/migrate/20240914052451_create_comments.rb
class CreateComments < ActiveRecord::Migration[7.0]
  def change
+   create_table :comments, id: :string, limit: 10 do |t|
-   create_table :comments do |t|
+     t.references :post, type: :string, null: false, foreign_key: true
-     t.references :post, null: false, foreign_key: true
      t.text :content

      t.timestamps
    end
  end
end
```

ã§ã¯ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã€å®Ÿéš›ã«`comments`ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```
docker compose run app rails db:migrate
```

```ruby:db/schema.rb
ActiveRecord::Schema[7.0].define(version: 2024_09_14_052451) do
  create_table "comments", id: { type: :string, limit: 10 }, charset: "utf8mb4", collation: "utf8mb4_0900_ai_ci", force: :cascade do |t|
    t.string "post_id", null: false
    t.text "content"
    t.datetime "created_at", null: false
    t.datetime "updated_at", null: false
    t.index ["post_id"], name: "index_comments_on_post_id"
  end

  create_table "posts", id: { type: :string, limit: 10 }, charset: "utf8mb4", collation: "utf8mb4_0900_ai_ci", force: :cascade do |t|
    t.string "title"
    t.text "content"
    t.datetime "created_at", null: false
    t.datetime "updated_at", null: false
  end

  add_foreign_key "comments", "posts"
end
```

Commentãƒ†ãƒ¼ãƒ–ãƒ«ã®`id`ã‚«ãƒ©ãƒ ã€`post_id`ã‚«ãƒ©ãƒ ã®å‹ãŒ`string`ã«å¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚

ã§ã¯ã€å®Ÿéš›ã«ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```ruby:config/routes.rb
Rails.application.routes.draw do
  root 'posts#index'
  resources :posts do
    resources :comments, only: [:create]
  end
end
```

ã“ã®ã‚ˆã†ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å®šç¾©ã—ã¾ã™ã€‚

```ruby:app/models/post.rb
class Post < ApplicationRecord
  has_many :comments, dependent: :destroy
end
```

```ruby:app/controllers/comments_controller.rb
class CommentsController < ApplicationController
  before_action :set_post

  def create
    @comment = @post.comments.build(comment_params)
    if @comment.save
      redirect_to @post, notice: 'Comment was successfully created.'
    else
      render :new
    end
  end

  private

  def set_post
    @post = Post.find(params[:post_id])
  end

  def comment_params
    params.require(:comment).permit(:content)
  end
end
```

```ruby:app/views/posts/show.html.erb
<p style="color: green"><%= notice %></p>

<%= render @post %>

<div>
  <%= link_to "Edit this post", edit_post_path(@post) %> |
  <%= link_to "Back to posts", posts_path %>

  <%= button_to "Destroy this post", @post, method: :delete %>
</div>

<hr>

<p>Comments</p>

<% @post.comments.each do |comment| %>
  <div>
    <strong>Comment:</strong>
    <p><%= comment.content %></p>
  </div>
<% end %>

<p>Add a new comment</p>
<%= form_with(model: [@post, Comment.new], local: true) do |form| %>
  <div>
    <%= form.label :content, style: "display: block" %>
    <%= form.text_area :content %>
  </div>
  <div>
    <%= form.submit %>
  </div>
<% end %>
```

ä¸Šè¨˜ã®ã‚ˆã†ã«å„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã€ http://localhost:3000/posts/6494ac5f80 ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/a3819deb3242-20240914.png =500x)

![](https://storage.googleapis.com/zenn-user-upload/e2063a4b8892-20240914.png =500x)

ç„¡äº‹ã«ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚

ã§ã¯ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§idã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```ruby
docker compose run app rails c

irb(main):001> Comment.first
  Comment Load (0.6ms)  SELECT `comments`.* FROM `comments` ORDER BY `comments`.`id` ASC LIMIT 1
=>
#<Comment:0x0000ffff8e274a78
  id: "3d6cb29b00",
  post_id: "6494ac5f80",
  content: "ã‚³ãƒ¡ãƒ³ãƒˆ",
  created_at: Sat, 14 Sep 2024 06:03:32.050693000 UTC +00:00,
  updated_at: Sat, 14 Sep 2024 06:03:32.050693000 UTC +00:00>
```

ç„¡äº‹ã«idã€post_idãŒãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚

ã“ã®ã‚ˆã†ã«ã€å¤–éƒ¨ã‚­ãƒ¼ã§ã‚ã£ã¦ã‚‚ã€`string`å‹ã«å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### æ³¨æ„ç‚¹

```ruby:app/controllers/posts_controller.rb
class PostsController < ApplicationController
  def index
    @posts = Post.all.order(id: :asc)
  end
end
```

ä¸€è¦§ç”»é¢ãªã©ã§ã€ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒä½œæˆã•ã‚ŒãŸé †ã«è¡¨ç¤ºã—ãŸã„å ´åˆã€ä¸Šè¨˜ã®ã‚ˆã†ã«ã€`id`ã‚«ãƒ©ãƒ ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚
ã—ã‹ã—ã€`id`ã‚«ãƒ©ãƒ ã‚’ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã«å¤‰æ›´ã™ã‚‹ã¨ã€`id`ã‚«ãƒ©ãƒ ã‚’ä½¿ç”¨ã—ã¦ä¸¦ã³æ›¿ãˆã¦ã‚‚ã€ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒä½œæˆã•ã‚ŒãŸé †ã«è¡¨ç¤ºã•ã‚Œãªããªã‚Šã¾ã™ã€‚
ã“ã®å ´åˆã¯ã€`created_at`ã‚«ãƒ©ãƒ ã‚’ä½¿ç”¨ã—ã¦ä¸¦ã³æ›¿ãˆã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚

```ruby:app/controllers/posts_controller.rb
class PostsController < ApplicationController
  def index
    @posts = Post.all.order(created_at: :asc)
  end
end
```

## ã¾ã¨ã‚

ä»Šå›ã¯ã€ã€Œã€Railsã€‘primary_key(ä¸»ã‚­ãƒ¼)ã‚’ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã«ã™ã‚‹ã€ã¨ã„ã†ã“ã¨ã§ã€**Ruby on Rails**ã§ã€**primary_key**ã‚’ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã«ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚

**primary_key**ã‚’ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã«ã™ã‚‹ã“ã¨ã§ã€ãƒ‘ã‚¹ã‚’æ¨æ¸¬ã•ã‚Œã«ããã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

å°‘ã—ã§ã‚‚çš†æ§˜ã®å‚è€ƒã«ãªã‚Šã¾ã—ãŸã‚‰å¹¸ã„ã§ã™ã€‚

æœ€å¾Œã¾ã§ãŠèª­ã¿ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚

## å‚è€ƒæ–‡çŒ®

https://www.sejuku.net/blog/52356

https://utouto97.hatenablog.com/entry/2021/06/29/230440

https://zenn.dev/yusuke_docha/articles/1b162804f7ea12

https://qiita.com/decoy0318/items/81bdb0bc01302d17bf3a

https://qiita.com/belion_freee/items/8f8f1d1e5333da561fd8

https://qiita.com/HeRo/items/2816e27fb3066db6c4e6

https://qiita.com/at-946/items/f495442a8a9bfdae5a6b
